(()=>{"use strict";var e={584:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(354),a=n.n(r),o=n(314),i=n.n(o),s=n(417),c=n.n(s),d=new URL(n(193),n.b),l=i()(a()),u=c()(d);l.push([e.id,`.main-container {\n    background-color: rgb(162, 165, 241);\n    padding: 15px;\n}\n\nbody {\n    background-color: rgb(162, 165, 241);\n}\n\n.racing-container {\n    margin-top: 10px;\n}\n\n.car-bottom-wrapper {\n    display: flex;\n    flex-direction: row;\n    border-bottom: 4px dashed rgb(143, 226, 215);\n    /* gap: 10px; */\n    background-image: url(${u});\n  background-repeat: no-repeat; \n  background-position: right center;\n  background-size: contain;\n\n}\n\n.car-top-wrapper {\n    display: flex;\n    flex-direction: row;\n    /* gap: 10px; */\n}\n\n/* .button-small {\n    height: 25px;\n    width: 25px;\n} */\n\nsvg {\n    padding: 0;\n    margin-bottom: -20px;\n    /* position: absolute; \n    bottom: 0; */\n  }\n\n.car-div {\n    margin-top: 5px;\n    display: flex;\n    flex-direction: column;\n    gap: 0px\n  }\n\n\n  input, button {\n    /* height: 25px; */\n    border-radius: 7px;\n  }\n\n  input {\n    height: 25px;\n  }\n\n  button {\n    background-color: rgb(241, 172, 172);\n    border:transparent;\n    margin-right: 5px;\n    margin-bottom: 10px;\n    padding-left: 20px;\n    padding-right: 20px;\n    padding-top: 5px;\n    padding-bottom: 5px;\n    transition: scale 0.5s;\n      }\n\n  button:hover {\n    background-color: rgb(137, 206, 147);\n    transform: scale(1.1);\n  }\n\n  .car-name {\n    font-size: x-large;\n    font-weight: bold;\n    color: rgb(217, 247, 136);\n    text-decoration: dotted;\n  }\n\n  .pagination {\n    margin-top: 15px;\n  }\n\n  .page-indicator {\n    padding-left: 10px;\n    padding-right: 15px;\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  #popUp {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: rgba(0, 0, 0, 0.5);\n    padding: 20px;\n    border-radius: 10px;\n    z-index: 999; \n    color: white;\n  }`,"",{version:3,sources:["webpack://./src/garageView/garageView.css"],names:[],mappings:"AAAA;IACI,oCAAoC;IACpC,aAAa;AACjB;;AAEA;IACI,oCAAoC;AACxC;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,4CAA4C;IAC5C,eAAe;IACf,yDAA+C;EACjD,4BAA4B;EAC5B,iCAAiC;EACjC,wBAAwB;;AAE1B;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,eAAe;AACnB;;AAEA;;;GAGG;;AAEH;IACI,UAAU;IACV,oBAAoB;IACpB;gBACY;EACd;;AAEF;IACI,eAAe;IACf,aAAa;IACb,sBAAsB;IACtB;EACF;;;EAGA;IACE,kBAAkB;IAClB,kBAAkB;EACpB;;EAEA;IACE,YAAY;EACd;;EAEA;IACE,oCAAoC;IACpC,kBAAkB;IAClB,iBAAiB;IACjB,mBAAmB;IACnB,kBAAkB;IAClB,mBAAmB;IACnB,gBAAgB;IAChB,mBAAmB;IACnB,sBAAsB;MACpB;;EAEJ;IACE,oCAAoC;IACpC,qBAAqB;EACvB;;EAEA;IACE,kBAAkB;IAClB,iBAAiB;IACjB,yBAAyB;IACzB,uBAAuB;EACzB;;EAEA;IACE,gBAAgB;EAClB;;EAEA;IACE,kBAAkB;IAClB,mBAAmB;EACrB;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,eAAe;IACf,QAAQ;IACR,SAAS;IACT,gCAAgC;IAChC,oCAAoC;IACpC,aAAa;IACb,mBAAmB;IACnB,YAAY;IACZ,YAAY;EACd",sourcesContent:[".main-container {\r\n    background-color: rgb(162, 165, 241);\r\n    padding: 15px;\r\n}\r\n\r\nbody {\r\n    background-color: rgb(162, 165, 241);\r\n}\r\n\r\n.racing-container {\r\n    margin-top: 10px;\r\n}\r\n\r\n.car-bottom-wrapper {\r\n    display: flex;\r\n    flex-direction: row;\r\n    border-bottom: 4px dashed rgb(143, 226, 215);\r\n    /* gap: 10px; */\r\n    background-image: url('../images/favicon.webp');\r\n  background-repeat: no-repeat; \r\n  background-position: right center;\r\n  background-size: contain;\r\n\r\n}\r\n\r\n.car-top-wrapper {\r\n    display: flex;\r\n    flex-direction: row;\r\n    /* gap: 10px; */\r\n}\r\n\r\n/* .button-small {\r\n    height: 25px;\r\n    width: 25px;\r\n} */\r\n\r\nsvg {\r\n    padding: 0;\r\n    margin-bottom: -20px;\r\n    /* position: absolute; \r\n    bottom: 0; */\r\n  }\r\n\r\n.car-div {\r\n    margin-top: 5px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 0px\r\n  }\r\n\r\n\r\n  input, button {\r\n    /* height: 25px; */\r\n    border-radius: 7px;\r\n  }\r\n\r\n  input {\r\n    height: 25px;\r\n  }\r\n\r\n  button {\r\n    background-color: rgb(241, 172, 172);\r\n    border:transparent;\r\n    margin-right: 5px;\r\n    margin-bottom: 10px;\r\n    padding-left: 20px;\r\n    padding-right: 20px;\r\n    padding-top: 5px;\r\n    padding-bottom: 5px;\r\n    transition: scale 0.5s;\r\n      }\r\n\r\n  button:hover {\r\n    background-color: rgb(137, 206, 147);\r\n    transform: scale(1.1);\r\n  }\r\n\r\n  .car-name {\r\n    font-size: x-large;\r\n    font-weight: bold;\r\n    color: rgb(217, 247, 136);\r\n    text-decoration: dotted;\r\n  }\r\n\r\n  .pagination {\r\n    margin-top: 15px;\r\n  }\r\n\r\n  .page-indicator {\r\n    padding-left: 10px;\r\n    padding-right: 15px;\r\n  }\r\n\r\n  .hidden {\r\n    display: none;\r\n  }\r\n\r\n  #popUp {\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    padding: 20px;\r\n    border-radius: 10px;\r\n    z-index: 999; \r\n    color: white;\r\n  }"],sourceRoot:""}]);const p=l},946:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(354),a=n.n(r),o=n(314),i=n.n(o)()(a());i.push([e.id,"#winners-table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 20px;\n  }\n  \n  #winners-table th {\n    background-color: #f2f2f2;\n    color: #333;\n    padding: 10px;\n    text-align: left;\n  }\n  \n  #winners-table td {\n    padding: 10px;\n  }\n  \n  #winners-table tr:nth-child(even) {\n    background-color: #f9f9f9;\n  }\n  \n  #winners-table tr:hover {\n    background-color: #ddd;\n  }","",{version:3,sources:["webpack://./src/winnersView/winnersView.css"],names:[],mappings:"AAAA;IACI,WAAW;IACX,yBAAyB;IACzB,gBAAgB;EAClB;;EAEA;IACE,yBAAyB;IACzB,WAAW;IACX,aAAa;IACb,gBAAgB;EAClB;;EAEA;IACE,aAAa;EACf;;EAEA;IACE,yBAAyB;EAC3B;;EAEA;IACE,sBAAsB;EACxB",sourcesContent:["#winners-table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  #winners-table th {\r\n    background-color: #f2f2f2;\r\n    color: #333;\r\n    padding: 10px;\r\n    text-align: left;\r\n  }\r\n  \r\n  #winners-table td {\r\n    padding: 10px;\r\n  }\r\n  \r\n  #winners-table tr:nth-child(even) {\r\n    background-color: #f9f9f9;\r\n  }\r\n  \r\n  #winners-table tr:hover {\r\n    background-color: #ddd;\r\n  }"],sourceRoot:""}]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(a," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},803:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(72),a=n.n(r),o=n(825),i=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),p=n.n(u),h=n(494),g=n.n(h),m=n(584),A={};A.styleTagTransform=g(),A.setAttributes=l(),A.insert=c().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=p(),a()(m.A,A);const f=m.A&&m.A.locals?m.A.locals:void 0},401:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(72),a=n.n(r),o=n(825),i=n.n(o),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),p=n.n(u),h=n(494),g=n.n(h),m=n(946),A={};A.styleTagTransform=g(),A.setAttributes=l(),A.insert=c().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=p(),a()(m.A,A);const f=m.A&&m.A.locals?m.A.locals:void 0},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var p=n(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var g=a(h,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var c=r(e,a),d=0;d<o.length;d++){var l=n(o[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},494:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},113:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.startRace=t.stopAnimation=t.carAnimation=void 0;const a=n(461);let o,i=[];function s(e,t,n,a){return r(this,void 0,void 0,(function*(){if(a instanceof HTMLElement&&n instanceof HTMLElement){n.dataset.animationId=String(requestAnimationFrame(r));const e=performance.now();function r(o){const i=(performance.now()-e)/t*n.offsetWidth,s=n.offsetWidth-a.offsetWidth-100,c=Math.min(i,s);a.style.transform=`translateX(${c}px)`,c>=s?console.log("Машинка достигла правого края контейнера"):n.dataset.animationId=String(requestAnimationFrame(r))}}else console.error("Не удалось найти элементы carPicContainer или carDivBottomWrapper")}))}o=document.createElement("div"),o.id="popUp",o.classList.add("hidden"),document.body.appendChild(o),document.addEventListener("click",(e=>{o.contains(e.target)||o.classList.add("hidden")})),t.carAnimation=function(e,t,n){return r(this,void 0,void 0,(function*(){try{const r=yield(0,a.getVelocity)(e);t&&n&&s(0,r,t,n)}catch(e){console.error("Error fetching animationTime:",e)}}))},t.stopAnimation=function(e,t){const n=t.dataset.animationId;n?(cancelAnimationFrame(Number(n)),delete t.dataset.animationId,console.log("Анимация остановлена для машины с ID:",e)):console.log("Анимация не найдена для машины с ID:",e)},t.startRace=function(e){return r(this,void 0,void 0,(function*(){const t=e.filter((e=>"number"==typeof e.id)),n=yield Promise.all(t.map((e=>r(this,void 0,void 0,(function*(){return yield(0,a.getVelocity)(e.id)}))))),c=t.map(((e,t)=>s(e.id,n[t],document.getElementById(`car-bottom-wrapper${e.id}`),document.getElementById(`car-pic-container${e.id}`))));yield Promise.all(c);const d=n.indexOf(Math.min(...n)),l=t[d],u=Number((n[d]/1e3).toFixed(2)),p=i.findIndex((e=>e.id===l.id));if(-1!==p?(i[p].wins++,i[p].time>u&&(i[p].time=u)):i.push({id:l.id,wins:1,time:u}),console.log("Победитель гонки:",l.name,"время:",u),setTimeout((()=>{o.textContent=`${l.name} finished first in ${u} seconds`,o.classList.remove("hidden")}),1e3*u),console.log("Обновленный массив победителей:",i),i.length>0)try{yield(0,a.createWinner)({id:l.id,wins:1,time:u}),console.log("Информация о победителе успешно отправлена на сервер")}catch(e){console.error("Error: Insert failed, duplicate id",e)}else console.error("Ошибка: Массив победителей пуст")}))}},605:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(461),i=n(156),s=n(997),c=a(n(734)),d=a(n(458)),l=n(554),u=n(113),p=a(n(887));t.default=class{constructor(){this.cars=[],this.winners=[],this.initGame(),this.currentPage=1,this.carsPerPage=7,this.totalPages=0}initGame(){return r(this,void 0,void 0,(function*(){try{this.garage=yield(0,o.getCars)(),this.totalPages=Math.ceil(this.garage.cars.length/this.carsPerPage),console.log(this.totalPages),this.mainContainer=document.createElement("div"),this.mainContainer.classList.add("main-container"),document.body.appendChild(this.mainContainer),this.header=document.createElement("div"),this.header.classList.add("header"),this.mainContainer.appendChild(this.header);const e=document.createElement("button");e.classList.add("toGarageButton"),e.textContent="to Garage",this.header.appendChild(e);const t=document.createElement("button");t.classList.add("toWinnersButton"),t.textContent="to Winners",t.addEventListener("click",(e=>{const t=new p.default;this.hide(),t.render(),t.show()})),this.header.appendChild(t),this.createContainer=document.createElement("div"),this.createContainer.classList.add("create-container"),this.mainContainer.appendChild(this.createContainer);const n=document.createElement("input");n.id="createCarName",n.placeholder="Enter car name",this.createContainer.appendChild(n);const a=document.createElement("input");a.type="color",a.id="createCarColor",this.createContainer.appendChild(a);const i=document.createElement("button");i.classList.add("create-button"),i.id="createButton",i.textContent="Create Car",i.type="submit",this.createContainer.appendChild(i),this.updateContainer=document.createElement("div"),this.updateContainer.classList.add("update-container"),this.mainContainer.appendChild(this.updateContainer);const s=document.createElement("input");s.placeholder="Choose a car",s.id="updateCarName",this.updateContainer.appendChild(s);const c=document.createElement("input");c.type="color",c.id="updateCarColor",this.updateContainer.appendChild(c);const d=document.createElement("button");d.classList.add("update-button"),d.textContent="Update Car",d.id="updateButton",d.type="submit",this.updateContainer.appendChild(d),this.raceResetGenerateContainer=document.createElement("div"),this.raceResetGenerateContainer.classList.add("raceResetGenerate-container"),this.mainContainer.appendChild(this.raceResetGenerateContainer);const l=document.createElement("button");l.classList.add("race-button"),l.textContent="Race",l.addEventListener("click",(e=>r(this,void 0,void 0,(function*(){try{const e=(this.currentPage-1)*this.carsPerPage,t=e+this.carsPerPage,n=this.garage.cars.slice(e,t);yield(0,u.startRace)(n),console.log("Гонка начата")}catch(e){console.error("Ошибка при запуске гонки:",e)}})))),this.raceResetGenerateContainer.appendChild(l);const h=document.createElement("button");h.classList.add("reset-button"),h.textContent="Reset",this.raceResetGenerateContainer.appendChild(h);const g=document.createElement("button");g.classList.add("generate-cars-button"),g.id="generateCarsButton",g.textContent="Generate Cars",this.raceResetGenerateContainer.appendChild(g),this.garageCount=document.createElement("div"),this.garageCount.classList.add("garage-count"),this.garageCount.innerHTML=`Garage (${this.garage.cars.length})`,this.mainContainer.appendChild(this.garageCount),this.pageNum=document.createElement("div"),this.pageNum.innerHTML=`Page #${this.currentPage}`,this.pageNum.classList.add("page-num"),this.mainContainer.appendChild(this.pageNum),this.racingTrackContainer=document.createElement("div"),this.racingTrackContainer.classList.add("racing-container"),this.mainContainer.appendChild(this.racingTrackContainer),this.renderGaragePage(),this.setupListeners()}catch(e){console.error("Error initializing game:",e)}}))}show(){this.mainContainer.style.display="block"}hide(){this.mainContainer.style.display="none"}setupListeners(){const e=document.getElementById("createButton"),t=document.getElementById("updateButton"),n=document.getElementById("generateCarsButton");e&&e.addEventListener("click",(e=>this.createCarHandler(e))),t&&t.addEventListener("click",(e=>this.updateCarHandler(e))),n&&n.addEventListener("click",(e=>this.generateCarsHandler(e)))}createCarHandler(e){return r(this,void 0,void 0,(function*(){e.preventDefault();const t=document.querySelector("#createCarName"),n=document.querySelector("#createCarColor");if(t&&n){const e=t.value,r=n.value;try{yield(0,o.createCar)({name:e,color:r}),yield this.refreshGarage()}catch(e){console.error("Error creating car:",e)}}}))}updateCarHandler(e){return r(this,void 0,void 0,(function*(){e.preventDefault();const t=document.querySelector("#updateCarName"),n=document.querySelector("#updateCarColor");if(t&&n&&this.carToUpdate&&void 0!==this.carToUpdate.id){const e=t.value,r=n.value,a=this.carToUpdate.id;try{yield(0,o.updateCar)(a,{name:e,color:r}),yield this.refreshGarage()}catch(e){console.error("Error updating car:",e)}}}))}selectCarHandler(e,t){return r(this,void 0,void 0,(function*(){e.preventDefault();const n=document.querySelector("#updateCarName"),r=document.querySelector("#updateCarColor");n&&r&&(n.value=t.name,r.value=t.color,this.carToUpdate=t,console.log(this))}))}removeCarHandler(e,t){return r(this,void 0,void 0,(function*(){if(e.preventDefault(),void 0!==t.id){const e=t.id;try{yield(0,o.deleteCar)(e),yield this.refreshGarage()}catch(e){console.error("Error updating car:",e)}}}))}generateCarsHandler(e){return r(this,void 0,void 0,(function*(){e.preventDefault();for(let e=0;e<100;e+=1){const e=(0,d.default)(),t=(0,c.default)();try{yield(0,o.createCar)({name:e,color:t})}catch(e){console.error("Error creating car:",e)}yield this.refreshGarage()}}))}refreshGarage(){return r(this,void 0,void 0,(function*(){try{this.garage=yield(0,o.getCars)(),this.garageCount.innerHTML=`Garage (${this.garage.cars.length})`,this.pageNum.innerHTML=`Page #${this.currentPage}`,this.clearGarage(),this.totalPages=Math.ceil(this.garage.cars.length/this.carsPerPage),this.drawGarage()}catch(e){console.error("Error refreshing garage:",e)}}))}clearGarage(){this.racingTrackContainer.innerHTML=""}drawGarage(){this.renderGaragePage()}renderPagination(){console.log("render pagination");const e=(0,l.renderPagination)(this.currentPage,this.totalPages,(()=>this.prevPage()),(()=>this.nextPage()));this.racingTrackContainer.appendChild(e),e.classList.add("pagination")}nextPage(){(0,l.nextPage)(this)}prevPage(){(0,l.prevPage)(this)}renderGaragePage(){console.log("renderGaragePage"),console.log(this.currentPage);const e=(this.currentPage-1)*this.carsPerPage;console.log(e);const t=e+this.carsPerPage;console.log(t);const n=this.garage.cars.slice(e,t);var a,o;console.log(this.garage.cars),console.log(n),this.clearGarage(),a=n,(o=this.racingTrackContainer).innerHTML="",console.log(a),a.forEach((e=>{var t;let n=document.createElement("div");n.id=(null===(t=e.id)||void 0===t?void 0:t.toString())||"",n.classList.add("car-div"),function(e,t,n){const a=document.createElement("div");a.classList.add("car-top-wrapper"),t.appendChild(a);const o=document.createElement("button");o.textContent="select",o.id=`selectButton${e.id}`,o.addEventListener("click",(t=>n.selectCarHandler(t,e))),a.appendChild(o);const i=document.createElement("button");i.textContent="remove",i.addEventListener("click",(t=>n.removeCarHandler(t,e))),a.appendChild(i);const c=document.createElement("div");c.classList.add("car-name"),c.innerHTML=`${e.name}`,a.appendChild(c);const d=document.createElement("div");d.classList.add("car-bottom-wrapper"),d.id=`car-bottom-wrapper${e.id}`,t.appendChild(d);const l=document.createElement("button");l.classList.add("button-small"),l.id=`go-button${e.id}`,l.textContent="A",l.addEventListener("click",(t=>{e.id&&(0,u.carAnimation)(e.id,d,h)})),d.appendChild(l);const p=document.createElement("button");p.classList.add("button-small"),p.textContent="B",p.addEventListener("click",(t=>{if(e.id){const t=document.getElementById(`car-bottom-wrapper${e.id}`);t&&function(e,t){r(this,void 0,void 0,(function*(){yield(0,u.stopAnimation)(e,t)}))}(e.id,t)}})),d.appendChild(p);const h=document.createElement("div");h.classList.add("car-pic-container"),d.appendChild(h);const g=(0,s.createSVGElement)(e);h.id=`car-pic-container${e.id}`,h.appendChild(g)}(e,n,i.garageView),o.appendChild(n)})),this.renderPagination()}}},997:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSVGElement=void 0,t.createSVGElement=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("fill",e.color),t.setAttribute("height","60px"),t.setAttribute("width","100px"),t.setAttribute("version","1.1"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("viewBox","0 0 612.001 612.001"),t.setAttribute("xml:space","preserve"),t.setAttribute("style","padding: 0;");const n=document.createElementNS("http://www.w3.org/2000/svg","g"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d","M589.333,276.033c-11.234-3.756-89.378-20.834-89.378-20.834s-144.86-82.375-162.245-82.375s-136.639,0.053-136.639,0.053 c-29.137,0-53.487,22.203-81.68,47.909c-13.287,12.112-27.953,25.442-44.13,37.299l-60.249,8.011 C6.306,268.872,0,277.018,0,286.643v69.03c0,11.913,9.656,21.571,21.57,21.571h41.401c3.007,34.65,32.153,61.932,67.57,61.932 c35.415,0,64.563-27.283,67.57-61.931h197.687c3.007,34.65,32.153,61.931,67.57,61.931s64.563-27.283,67.57-61.931h34.013 c26.95,0,40.119-11.64,43.426-22.566C616.739,327.03,610.724,283.185,589.333,276.033z M130.541,406.48 c-19.38,0-35.148-15.766-35.148-35.146s15.766-35.148,35.148-35.148c19.38,0,35.146,15.766,35.146,35.148 C165.688,390.714,149.921,406.48,130.541,406.48z M261.008,255.201H143.134c8.526-6.736,16.409-13.886,23.671-20.505 c19.086-17.402,35.57-32.432,55.294-32.432c0,0,17.85-0.008,38.91-0.017V255.201z M289.711,202.236 c14.588-0.005,27.592-0.009,34.116-0.009c16.245,0,82.135,38.264,106.864,52.975h-140.98L289.711,202.236L289.711,202.236z M463.367,406.48 c-19.38,0-35.146-15.766-35.146-35.146s15.766-35.148,35.146-35.148c19.38,0,35.148,15.766,35.148,35.148 C498.515,390.714,482.747,406.48,463.367,406.48z"),n.appendChild(r),t.appendChild(n),t}},156:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.garageView=void 0;const a=r(n(605));n(803),n(401),t.garageView=new a.default},554:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prevPage=t.nextPage=t.renderPagination=void 0,t.renderPagination=function(e,t,n,r){const a=document.createElement("div");a.classList.add("pagination");const o=document.createElement("button");o.textContent="Previous",o.addEventListener("click",n),a.appendChild(o);const i=document.createElement("span");i.classList.add("page-indicator"),i.textContent=`Page ${e} of ${t}`,a.appendChild(i);const s=document.createElement("button");return s.textContent="Next",s.addEventListener("click",r),a.appendChild(s),a},t.nextPage=function(e){e.currentPage<e.totalPages&&(e.currentPage++,e.pageNum.innerHTML=`Page #${e.currentPage}`,e.renderGaragePage())},t.prevPage=function(e){e.currentPage>1&&(e.currentPage--,e.renderGaragePage(),e.pageNum.innerHTML=`Page #${e.currentPage}`)}},734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),n=Math.floor(256*Math.random());return`#${e.toString(16).padStart(2,"0")}${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}},458:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=["Toyota","Honda","Ford","Chevrolet","Nissan","Volkswagen","BMW","Mercedes-Benz","Audi","Hyundai","Kia","Volvo","Subaru","Mazda","Jeep","Tesla","Lexus","Porsche","Ferrari","Maserati","Bentley","Rolls-Royce","Aston Martin","Lamborghini","Bugatti","McLaren","Jaguar","Land Rover","Infiniti","Acura","Cadillac","GMC","Lincoln","Buick","Chrysler","Dodge","Ram","Alfa Romeo","Fiat","Mitsubishi","Mini","Smart","Suzuki","Genesis","Koenigsegg","Pagani","Lotus","Maybach","Dacia","Lada","SEAT","Škoda","Fiat","Peugeot","Citroën","Renault","DS Automobiles","Opel","Vauxhall","Fiat","Maserati","Lancia","Ferrari","Abarth","Alpine","Daihatsu","Suzuki","Isuzu","SsangYong","Daewoo","Mahindra","Tata","Force","Lamborghini","Bugatti","Koenigsegg","Pagani","Spyker","Caterham","Ariel","Noble","Morgan","TVR","Gumpert","Wiesmann","Hennessey","Rimac","Lucid","Venturi","Rivian"],t=["Camry","Accord","F-150","Silverado","Altima","Jetta","3 Series","C-Class","A4","Elantra","Optima","XC60","Outback","CX-5","Wrangler","Model 3","RX","911","488","Ghibli","Continental GT","Phantom","DB11","Huracan","Chiron","720S","F-Pace","Range Rover","Q50","MDX","Escalade","Sierra","Navigator","Enclave","Pacifica","Charger","1500","Giulia","500","Outlander","Cooper","Fortwo","Swift","G80","Agera RS","Huayra","Evora","S-Class","Duster","Niva","Leon","Octavia","Panda","208","C3","Clio","DS 7 Crossback","Corsa","Astra","Tipo","Levante","Ypsilon","Portofino","595","A110","Cuore","Jimny","D-Max","Rexton","Matiz","Thar","Nexon","Gurkha","Aventador","Veyron","Jesko","Zonda","C8","Seven","Atom","M600","Plus Four","Griffith","Apollo","GT","Venom GT","C_Two","Air","Atlantique","R1T"],n=Math.floor(Math.random()*e.length),r=Math.floor(Math.random()*t.length);return e[n]+" "+t[r]}},461:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getWinners=t.updateWinner=t.deleteWinner=t.createWinner=t.engineSuccess=t.getVelocity=t.deleteCar=t.updateCar=t.createCar=t.getCar=t.getCars=void 0;const r="http://localhost:3000",a="/garage",o="/engine",i="/winners";t.getCars=()=>n(void 0,void 0,void 0,(function*(){const e=yield fetch(`${r}${a}`);return{cars:yield e.json(),count:Number(e.headers.get("X-Total-Count"))}})),t.getCar=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${a}/${e}`);return yield t.json()})),t.createCar=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.updateCar=(e,t)=>n(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r}${a}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.deleteCar=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${a}/${e}`,{method:"DELETE"});return yield t.json()})),t.getVelocity=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${o}?id=${e}&status=started`,{method:"PATCH"}),n=yield t.json(),a=n.velocity;return n.distance/a})),t.engineSuccess=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${o}?id=${e}&status=drive`,{method:"PATCH"});return console.log(t.status),t.status})),t.createWinner=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.deleteWinner=e=>n(void 0,void 0,void 0,(function*(){const t=yield fetch(`${r}${i}/:${e}`,{method:"DELETE"});return yield t.json()})),t.updateWinner=(e,t)=>n(void 0,void 0,void 0,(function*(){const n=yield fetch(`${r}${i}/:${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.getWinners=()=>n(void 0,void 0,void 0,(function*(){const e=yield fetch(`${r}${i}`),t=yield e.json();return Number(e.headers.get("X-Total-Count")),t}))},887:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(461),i=n(461),s=a(n(605));t.default=class{constructor(){this.container=document.createElement("div"),this.winnersTable=document.createElement("table"),this.toGarageButton=document.createElement("button"),this.winnersTable.id="winners-table",document.body.appendChild(this.container)}render(){return r(this,void 0,void 0,(function*(){console.log("inside render");try{const e=yield(0,o.getWinners)();this.winnersTable.innerHTML="";const t=this.winnersTable.insertRow(),n=["Name","Wins","Best Time"];console.log(n),n.forEach((e=>{const n=t.insertCell();n.textContent=e,n.addEventListener("click",(()=>this.sortTable(e)))}));for(const t of e){const e=this.winnersTable.insertRow();console.log("row"),(0,i.getCar)(t.id).then((n=>{const r=n.name,{id:a,wins:o,time:i}=t;e.insertCell().textContent=r,e.insertCell().textContent=o.toString(),e.insertCell().textContent=`${i} seconds`})).catch((e=>{console.error("Error fetching car:",e)}))}this.container&&(this.container.innerHTML="",this.container.appendChild(this.winnersTable),console.log(this.winnersTable),console.log(this.container))}catch(e){console.error("Error rendering winners table:",e)}this.container.appendChild(this.toGarageButton),this.toGarageButton.innerText="To Garage",this.toGarageButton.addEventListener("click",(e=>{const t=new s.default;this.hide(),t.show()}))}))}sortTable(e){const t=Array.from(this.winnersTable.rows[0].cells).findIndex((t=>t.textContent===e)),n="asc"===this.winnersTable.dataset.sort?1:-1;Array.from(this.winnersTable.rows).slice(1).sort(((e,r)=>(parseInt(e.cells[t].textContent.split(" ")[0])-parseInt(r.cells[t].textContent.split(" ")[0]))*n)).forEach((e=>this.winnersTable.appendChild(e))),this.winnersTable.dataset.sort=1===n?"desc":"asc"}show(){this.container.style.display="block"}hide(){this.container.style.display="none"}}},193:(e,t,n)=>{e.exports=n.p+"9783b6c75dd4e1a6cddb.webp"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,n(156)})();
//# sourceMappingURL=index.js.map